<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Babylon IFC Viewer - User Guide</title>
    <style>
      :root {
        --bg: #f6f7f9;
        --panel: #ffffff;
        --text: #1f2937;
        --muted: #6b7280;
        --border: #e5e7eb;
        --accent: #0a66c2;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: "Segoe UI", Roboto, Arial, sans-serif;
        color: var(--text);
        background: var(--bg);
        line-height: 1.5;
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
        padding: 24px 16px 40px;
      }

      .card {
        background: var(--panel);
        border: 1px solid var(--border);
        border-radius: 10px;
        padding: 16px 18px;
        margin-bottom: 12px;
      }

      h1,
      h2 {
        margin: 0 0 10px;
      }

      h1 {
        font-size: 24px;
      }

      h2 {
        font-size: 18px;
      }

      p {
        margin: 0 0 8px;
      }

      ul,
      ol {
        margin: 0;
        padding-left: 20px;
      }

      code {
        background: #f3f4f6;
        border: 1px solid #e5e7eb;
        border-radius: 6px;
        padding: 1px 5px;
      }

      .muted {
        color: var(--muted);
      }

      a {
        color: var(--accent);
      }
    </style>
  </head>
  <body>
    <main class="container">
      <section class="card">
        <h1>Babylon IFC Viewer User Guide</h1>
        <p class="muted">
          This guide explains the current workflows: loading a model, navigating the IFC tree, using pick modes,
          clipping, and copying element data.
        </p>
      </section>

      <section class="card">
        <h2>1. Load an IFC Model</h2>
        <ol>
          <li>Click <strong>Open IFC</strong> in the top header.</li>
          <li>Select a <code>.ifc</code> file from your computer.</li>
          <li>Wait for parsing and scene creation to complete.</li>
        </ol>
        <p>You can also use <strong>Recent</strong> (next to Open IFC) to reopen previously loaded models.</p>
        <ul>
          <li>Menu labels show file names only.</li>
          <li>Full file paths are available in tooltip (<code>title</code>).</li>
        </ul>
        <p class="muted">Loading a new model resets current selection and closes Element Info.</p>
      </section>

      <section class="card">
        <h2>2. Use the Project Tree</h2>
        <ul>
          <li>Expand/collapse nodes with the arrow control.</li>
          <li>Click a node to select it and isolate visibility for its full subtree in the scene.</li>
          <li><strong>Multi-select:</strong> <code>Ctrl+Click</code> toggles nodes, <code>Shift+Click</code> selects a range from anchor.</li>
          <li>Keyboard: <code>ArrowRight</code> expand, <code>ArrowLeft</code> collapse, <code>Enter</code>/<code>Space</code> select.</li>
          <li>Keyboard multi-select: <code>Ctrl+Enter</code> toggle focused node, <code>Shift+Enter</code> range-select from anchor.</li>
        </ul>
      </section>

      <section class="card">
        <h2>3. Pick Modes in the 3D View</h2>
        <ul>
          <li><strong>Select</strong>: click a mesh to select and show element info, with project-tree-aware selection behavior.</li>
          <li><strong>Isolate</strong>: click a mesh to isolate it (or subtree when mapped in tree).</li>
          <li><strong>Mesh double-click</strong>: zooms to parent scope of the clicked mesh (works in all pick modes, including Measure).</li>
          <li><strong>Isolate button double-click</strong>: same parent-scope zoom for the current selected/highlighted element.</li>
          <li><strong>Measure</strong>: click first element, then second element to get distance and dX/dY/dZ.</li>
          <li><strong>Inspect</strong>: info-focused pick mode; updates Element Info directly without select/isolate tree behavior.</li>
        </ul>
        <p class="muted"><strong>Select vs Inspect:</strong> Select is for navigation-aware selection, Inspect is for quick read-only element inspection.</p>
      </section>

      <section class="card">
        <h2>4. Clip Controls</h2>
        <ul>
          <li>Use <strong>Clip</strong> button in the header to open clipping popover.</li>
          <li>Enable/disable clip quickly from the status indicator next to Clip.</li>
          <li>Set axis (<code>X</code>/<code>Y</code>/<code>Z</code>) and slider position.</li>
          <li>Use <strong>Invert</strong> (icon in Clip group) to flip the clipped side instantly.</li>
          <li>Clip settings are persisted in session storage.</li>
        </ul>
      </section>

      <section class="card">
        <h2>5. Element Info Panel</h2>
        <ul>
          <li>Shows key fields such as name/type/IDs for the current element.</li>
          <li>Includes dimensions/elevation when available.</li>
          <li>Each field with a value has its own copy icon.</li>
          <li><strong>Copy All</strong> supports three formats: <code>Text</code>, <code>JSON</code>, <code>Markdown table</code>.</li>
          <li>Panel closes using the close icon (or when a new model is loaded).</li>
        </ul>
      </section>

      <section class="card">
        <h2>6. Related Elements Panel</h2>
        <ul>
          <li>Displayed on the right side, below the header, when related elements are available.</li>
          <li>Shows common relations (for example parent/sibling/child) with type and Express ID.</li>
          <li>Clicking a related item adds it to current visible/selected context (does not replace current selection).</li>
          <li><code>Ctrl+Click</code> toggles related items; <code>Shift+Click</code> selects range.</li>
          <li>Clicking an already selected related item deselects it.</li>
          <li>Visibility can be controlled from user settings with <strong>Show related elements</strong> (enabled by default).</li>
        </ul>
      </section>

      <section class="card">
        <h2>7. Camera and View Controls</h2>
        <ul>
          <li><strong>Fit</strong> focuses camera on selected item/subtree.</li>
          <li><strong>Zoom Parent</strong> focuses camera on the parent scope of current element.</li>
          <li><strong>Zoom Parent</strong> keeps current Project Tree selection (no selection switch to parent).</li>
          <li><strong>Always Fit</strong> auto-fits on selection changes.</li>
          <li>Breadcrumbs in header are clickable and keep tree selection in sync.</li>
        </ul>
      </section>

      <section class="card">
        <h2>8. Tips and Troubleshooting</h2>
        <ul>
          <li>If picking does not return data, verify the loaded file contains IFC geometry and metadata.</li>
          <li>If performance drops on huge models, expand only relevant tree branches.</li>
          <li>Use subtree selection in Project Tree to focus on one part of the project.</li>
        </ul>
      </section>

      <section class="card">
        <h2>Shortcuts Summary</h2>
        <ul>
          <li><code>Shift+?</code> or <code>?</code>: Open/close shortcuts dialog</li>
          <li><code>Esc</code>: Close shortcuts dialog</li>
          <li>Mouse click outside shortcuts panel: Close shortcuts dialog</li>
          <li><code>F</code>: Fit selected element/subtree</li>
          <li><code>R</code>: Zoom to parent element</li>
          <li><code>Ctrl+S</code>: Select mode</li>
          <li><code>Ctrl+I</code>: Isolate mode</li>
          <li><code>Ctrl+M</code>: Measure mode</li>
          <li><code>Ctrl+N</code>: Inspect mode</li>
          <li><code>Ctrl+C</code>: Toggle clip on/off</li>
          <li><code>ArrowRight</code>: Expand focused tree node</li>
          <li><code>ArrowLeft</code>: Collapse focused tree node</li>
          <li><code>ArrowUp</code>/<code>ArrowDown</code>: Move tree focus</li>
          <li><code>Enter</code> / <code>Space</code>: Select focused tree node</li>
          <li><code>Ctrl+Click</code> / <code>Ctrl+Enter</code>: Toggle tree item in selection</li>
          <li><code>Shift+Click</code> / <code>Shift+Enter</code>: Range selection from anchor</li>
        </ul>
      </section>
    </main>
  </body>
</html>
